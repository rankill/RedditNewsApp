<div class='u-container posts'
     infinite-scroll
     [infiniteScrollDisabled]="loadingMore"
     [infiniteScrollDistance]="0"
     (scrolled)="onScroll()"
     [scrollWindow]="true">
  <h2 class="u-text_center posts__title icon-loop"> {{ title }}</h2>

  <code class="u-text_right posts__badge"
        *ngIf="posts">
    Listed {{ posts.length }} posts
  </code>

  <ul *ngIf="posts" class="posts__list">
    <li class="posts__list__item"
        *ngFor="let post of posts"
        [ngClass] = {show_details:post.showDetailBtn}
        (focusout)= 'post.showDetailBtn = false'
        (click)= 'post.showDetailBtn = true'
        (mouseenter) = 'post.showDetailBtn = true'
        (mouseleave) = 'post.showDetailBtn = false'>

      <div class="posts__list__item__info">
        <p class="posts__list__item__info__title"> {{ post.title }}</p>
        <p class="posts__list__item__info__author">
          Created by:
          <span class="posts__list__item__info__author__username">
          <a target="_blank"
             [href]="'https://www.reddit.com/user/'+post.author">
            {{ post.author }}
          </a>
        </span>
        </p>
      </div>

      <div class="posts__list__item__detail">
        <a class="posts__list__item__detail_link"
           [routerLink]="['/detail', post.id]">
          Details
        </a>
      </div>
    </li>

  </ul>


  <span *ngIf="loadingMore" class="u-center_block">
    Loading more posts
    <span class="icon-spinner spinner spinner--steps2"></span>
  </span>

  <code *ngIf="errorPosts">
    Error getting latest reddit posts, try it again later please :)
  </code>
</div>
